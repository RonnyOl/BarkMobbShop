(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[783],{4272:function(e,t,r){Promise.resolve().then(r.bind(r,2270))},2270:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(3827),n=r(4090),i=r(5486),c=r(7499),s=r(7907),o=r(56),l=r(8121),d=r(8003),u=r(3411),p=r.n(u);function g(){let e=new o.Z,t=(0,s.useRouter)(),[r]=(0,i.F_)(c.I),[u,g]=(0,n.useState)(!1),[h,m]=(0,n.useState)(null),[b,x]=(0,n.useState)(!0),[f,y]=(0,n.useState)(!1),[j,v]=(0,n.useState)(!1),[k,N]=(0,n.useState)(""),[I,w]=(0,n.useState)(""),[S,C]=(0,n.useState)(""),[E,B]=(0,n.useState)(""),[P,T]=(0,n.useState)(""),[J,D]=(0,n.useState)(""),[O,_]=(0,n.useState)(""),F=e.get("userLoggedIn");async function Z(){console.log("ME ESTOY RENDERIZANDO 1111");let e=(await (0,l.PL)((0,l.hJ)(c.db,"productos"))).docs.map(e=>({id:e.id,...e.data()}));if(h){let t=e.map(e=>{let{id:t,nombre:r,precio:a,descripcion:n,stock:i,tipo:c,imagen:s}=e;return{id:t,nombre:r,precio:a,descripcion:n,stock:i,tipo:c,imagen:s}}),r=h.map(e=>{let{id:t,nombre:r,precio:a,descripcion:n,stock:i,tipo:c,imagen:s}=e;return{id:t,nombre:r,precio:a,descripcion:n,stock:i,tipo:c,imagen:s}});JSON.stringify(t)!==JSON.stringify(r)&&m(e)}else m(e);x(!1)}async function A(){if(r)try{let e=(0,l.IO)((0,l.hJ)(c.db,"usuarios"),(0,l.ar)("id","==",r.uid)),a=(await (0,l.PL)(e)).docs[0];if(a){let e=a.data();"admin"===e.rol?y(!0):t.push("/")}}catch(e){}}let L=async e=>{await (0,l.oe)((0,l.JU)(c.db,"productos",e)),m([])},z=(e,t)=>{p().fire({title:"\xbfQuieres borrar ".concat(t.nombre),showDenyButton:!0,confirmButtonText:"Borrar",denyButtonText:"No borrar"}).then(t=>{t.isConfirmed?(p().fire("Borrado!","","Te re cabio jajaja"),L(e)):t.isDenied&&p().fire("No se ha borrado nada","","")})},H=async(e,t)=>{let{isConfirmed:r}=await p().fire({title:"Input something",html:'\n        <div class="h-full w-full flex flex-col gap-3 text-black">\n          <h2>Nombre</h2>\n          <input id="nombreInput" value="'.concat(t.nombre,'" class="bg-gray p-4 border-4 border-indigo-500/100" placeholder="Nombre"/>\n          <h2>Precio</h2>\n          <input id="precioInput" value="').concat(t.precio,'" class="bg-gray p-4 border-4 border-indigo-500/100" placeholder="Precio"/>\n          <h2>Descripcion</h2>\n          <input id="descripcionInput" value="').concat(t.descripcion,'" class="bg-gray p-4 border-4 border-indigo-500/100" placeholder="Precio"/>\n          <h2>Imagen</h2>\n          <input id="imagenInput" value="').concat(t.imagen,'" class="bg-gray p-4 border-4 border-indigo-500/100" placeholder="Precio"/>\n          <h2>Tipo</h2>\n          <input id="tipoInput" value="').concat(t.tipo,'" class="bg-gray p-4 border-4 border-indigo-500/100" placeholder="Precio"/>\n          <h2>Stock</h2>\n          <div class="flex gap-2 justify-center items-center">\n          <input value="').concat(t.stock,'" id="stockInput" type="checkbox" class="bg-gray p-4 border-4 border-indigo-500/100"> \xbfTiene stock? </input>\n          </div>\n          <h2>Tipea el nombre para confirmar</h2>\n          <input id="aceptar" type="text" class="bg-gray p-4 border-4 border-indigo-500/100">\n        </div>'),showCancelButton:!0,confirmButtonText:"Confirmar"});r&&(N(document.getElementById("nombreInput").value),C(document.getElementById("descripcionInput").value),w(document.getElementById("precioInput").value),T(document.getElementById("tipoInput").value),_(document.getElementById("imagenInput").value),B(document.getElementById("stockInput").checked),D(e))};(0,n.useEffect)(()=>{J&&(M(J),D(null))},[J]);let q=async()=>{await (0,l.ET)((0,l.hJ)(c.db,"productos"),{nombre:k,precio:I,descripcion:S,stock:E,tipo:P,imagen:O}),m([])},M=async e=>{await (0,l.r7)((0,l.JU)(c.db,"productos",e),{nombre:k,precio:I,descripcion:S,stock:E,tipo:P,imagen:O}),m(h.map(t=>t.id===e?{id:t.id,nombre:k,precio:I,descripcion:S,stock:E,tipo:P,imagen:O}:t))};return(0,n.useEffect)(()=>{r&&A()},[r]),(0,n.useEffect)(()=>{Z()},[h]),(0,n.useEffect)(()=>{console.log(F),r||F||t.push("/")},[r,F]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(a.Fragment,{children:b?(0,a.jsx)(d.Z,{}):(0,a.jsxs)("div",{style:{minHeight:"100vh"},className:"h-full w-full bg-black text-white flex flex-col justify-center items-center py-6",children:[null!=h&&f?(0,a.jsx)("div",{style:{minHeight:"100vh"},className:"pt-6 flex flex-wrap gap-6 items-center justify-center",children:h.map((e,t)=>(0,a.jsxs)("div",{className:" admProd flex flex-nowrap lg:flex-wrap justify-center items-center gap-6 flex-col mt-16 text-black",children:[(0,a.jsx)("div",{children:(0,a.jsx)("img",{width:"300px",src:e.imagen})}),(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,a.jsx)("h2",{className:"text-3xl",children:e.nombre}),(0,a.jsxs)("p",{children:["Precio: ",(0,a.jsx)("b",{children:e.precio})]}),(0,a.jsx)("p",{children:e.descripcion}),!0==e.stock?(0,a.jsx)("p",{children:"Con stock"}):(0,a.jsx)("p",{children:(0,a.jsx)("b",{children:"Sin stock"})}),(0,a.jsx)("p",{children:e.tipo}),(0,a.jsx)("button",{className:"p-3 my-6 bg-black text-gray-200 ",onClick:()=>{z(e.id,e)},children:"Click aqu\xed para borrar"}),(0,a.jsx)("button",{className:"p-3 my-6 bg-black text-gray-200 ",onClick:()=>{H(e.id,e)},children:"Click aqu\xed para editar"})]})]},t))}):(0,a.jsx)("div",{style:{minHeight:"100vh"},className:"text-white h-full w-full bg-black flex items-center justify-center",children:"No tienes acceso"}),(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsx)("button",{className:"p-3 my-6 bg-white text-gray-700 ",onClick:()=>{v(!j)},children:j?(0,a.jsx)(a.Fragment,{children:"Ocultar"}):(0,a.jsx)(a.Fragment,{children:"A\xf1adir nuevo"})})}),j&&(0,a.jsxs)("div",{className:" flex-col bg-white text-black w-96 h-[46rem] py-36 flex justify-center items-center gap-6",children:[(0,a.jsx)("h2",{children:"Nombre"}),(0,a.jsx)("input",{className:"border-4 border-gray-500/100 p-1 text-gray-500",onChange:()=>{N(event.target.value)},type:"text",placeholder:"Nombre a agregar"}),(0,a.jsx)("h2",{children:"Precio"}),(0,a.jsx)("input",{className:"border-4 border-gray-500/100 p-1 text-gray-500",onChange:()=>{w(event.target.value)},type:"text",placeholder:"Precio a agregar"}),(0,a.jsx)("h2",{children:"Descripcion"}),(0,a.jsx)("input",{className:"border-4 border-gray-500/100 p-1 text-gray-500",onChange:()=>{C(event.target.value)},type:"text",placeholder:"Descripcion a agregar"}),(0,a.jsx)("h2",{children:"Imagen"}),(0,a.jsx)("input",{className:"border-4 border-gray-500/100 p-1 text-gray-500",onChange:()=>{_(event.target.value)},type:"text",placeholder:"Imagen a agregar"}),(0,a.jsx)("h2",{children:"Tipo"}),(0,a.jsx)("input",{className:"border-4 border-gray-500/100 p-1 text-gray-500",onChange:()=>{T(event.target.value)},type:"text",placeholder:"Tipo a agregar"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("h2",{children:"Stock"}),(0,a.jsx)("input",{className:"border-4 border-gray-500/100 p-1 text-gray-500",onChange:()=>{B(event.target.value)},type:"checkbox",placeholder:"Stock a agregar"})]}),(0,a.jsx)("button",{onClick:q,className:" border-4 border-gray-500/100 bg-gray-600 py-2 px-12 text-white ",children:"A\xf1adir"})]})]})})})}},7499:function(e,t,r){"use strict";r.d(t,{I:function(){return s},db:function(){return o}});var a=r(6142),n=r(2730),i=r(8121);let c=(0,a.C6)().length?(0,a.Mq)():(0,a.ZF)({apiKey:"AIzaSyB0dlJAe-JcCWcVZ1adrd7aVt-bgMJYxNE",authDomain:"barkmobbz.firebaseapp.com",projectId:"barkmobbz",storageBucket:"barkmobbz.appspot.com",messagingSenderId:"165659830581",appId:"1:165659830581:web:3d16d4e4f9bcfc92e4047c"}),s=(0,n.v0)(c),o=(0,i.ad)(c)},8003:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(3827);function n(){return(0,a.jsx)("div",{style:{minHeight:"100vh"},className:"text-white h-full w-full bg-black flex items-center justify-center",children:(0,a.jsxs)("div",{role:"status",children:[(0,a.jsx)("img",{className:"w-96 h-96 inline  text-gray-200 animate-spin dark:text-gray-600 fill-gray-600 dark:fill-gray-300",src:"SpinnerLogo.webp",alt:""}),(0,a.jsx)("span",{className:"sr-only",children:"Loading..."})]})})}r(4090)}},function(e){e.O(0,[358,380,461,891,434,971,69,744],function(){return e(e.s=4272)}),_N_E=e.O()}]);